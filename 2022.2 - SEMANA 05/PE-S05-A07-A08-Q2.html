<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PE-S05-A07-A08-Q2</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="container">
        <div id="header">
            PE-S05-A07-A08-Q2
            <img src="https://www.metropoledigital.ufrn.br/portal/assets/images/IMD_logo_01-01.svg">
        </div>
        <div id="semanaData">
            <span>Semana 05</span>
            <span>22/09/2022</span>
        </div>
        <div id="main">

            <h1>Programação Estruturada</h1>

            <form action="">
                <fieldset>
                    <legend>Data Atual</legend>
                    <p>
                        Utilizando apenas os métodos de manipulação de String, vistos na aula 07,
                        implemente um programa que obtêm a data de hoje a partir do método
                        new Date().toString() e realiza a impressão no seguinte formato: <br>
                        <strong>
                            Data: 15 de Nov de 2021 <br>
                            Hora: 09h15
                        </strong>

                    </p>
                    <label for="dataAtual">Data Atual:</label>
                    <textarea name="dataAtual" id="dataAtual" value="" rows="2" cols="30" readonly>
                    </textarea>

                    <input type="button" value="OK" onclick="inputRecebeDataAtual()">
                </fieldset>
            </form>
        </div>
        <div id="horaCertaContainer">
            <p id="horaCerta"></p>

        </div>
        <div>
            <input id="voltar" type="button" value="Voltar" onclick="window.location.href='index.html';"></a>
        </div>
    </div>


    <script>
        setInterval(horaCerta, 1000);

        function horaCerta() {
            const date = new Date();
            document.getElementById("horaCerta").innerHTML = date.toLocaleTimeString();
        }

        function inputRecebeDataAtualPTBR() {
            let options =
            {
                weekday: 'short',
                year: 'numeric',
                month: 'short',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit',
                timeZoneName: 'long'
            };

            const dataPtBr = new Date().toLocaleString('pt-br', options);
            //0     1  2  3    4  5    6     7      8          9
            //qua., 21 de set. de 2022 04:09 Horário Universal Coordenado
            const texto = dataPtBr.split(" ");
            const horas = texto[6].split(":");
            const dia = texto[1];
            let mes = texto[3];
            mes = mes.toLowerCase();
            mes = mes.substring(0, 1).toUpperCase().concat(mes.substring(1));
            mes = mes.replace(".", "");
            const ano = texto[5];
            const hora = horas[0];
            const minuto = horas[1];

            document.getElementById("dataAtual").value =
                (`Data: ${dia} de ${mes} de ${ano} \nHora: ${hora}h${minuto}`);

        }
        //função usando o que foi passado na aula, acima tem outra função, 
        //totalmente funcional e mais prática.
        function inputRecebeDataAtual() {
            const date = new Date().toString();
            //0   1   2  3    4        5        6        7      8  9
            //Tue Sep 20 2022 23:31:33 GMT-0300 (Horário Padrão de Brasília)
            //tratamento da HORA e MINUTOS
            const horas = date.substring(date.indexOf(":") - 2, date.indexOf(":"));
            const minutos = date.substring(date.indexOf(":") + 1, date.indexOf(":") + 3);

            // tratamento do DIA
            let temp = date;
            temp = removerTexto(temp, 2);
            const dia = temp.substring(0, temp.indexOf(" "));
            //tratamento do MÊS
            temp = date;
            temp = removerTexto(temp, 1);
            const mes = temp.substring(0, temp.indexOf(" "));
            //tratamento do ANO
            temp = date;
            temp = removerTexto(temp, 3);
            const ano = temp.substring(0, temp.indexOf(" "));

            document.getElementById("dataAtual").value =
                (`Data: ${dia} de ${mes} de ${ano} \nHora: ${horas}h${minutos}`);
        }

        function removerTexto(texto, vezes) {
            for (i = 0; i < vezes; i++) {
                texto = texto.substring(texto.indexOf(" ") + 1);
            }
            return texto;
        }
    </script>
</body>

</html>